# =============================================================================
# Quarkus Transaction Event Ingestion Application Configuration
# =============================================================================

# Application Info
quarkus.application.name=edios
quarkus.application.version=1.0.0

# =============================================================================
# HTTP/HTTPS Configuration
# =============================================================================

# HTTP port (redirects to HTTPS in production)
quarkus.http.port=8080

# HTTPS/TLS Configuration
quarkus.http.ssl-port=8443
quarkus.http.ssl.certificate.files=certs/server.crt
quarkus.http.ssl.certificate.key-files=certs/server.key

# Insecure requests handling (redirect to HTTPS in production)
# Options: enabled, redirect, disabled
quarkus.http.insecure-requests=redirect

# HTTP/2 support
quarkus.http.http2=true

# =============================================================================
# Reactive MariaDB/MySQL Pool Configuration
# =============================================================================

# Database disabled - using in-memory sample rules for development
# Uncomment below to enable database connection for production
#quarkus.datasource.db-kind=mysql
#quarkus.datasource.devservices.enabled=true
#quarkus.datasource.devservices.image-name=mariadb:11
#quarkus.datasource.devservices.db-name=edios_dev
#quarkus.datasource.devservices.username=edios_user
#quarkus.datasource.devservices.password=devpassword
#quarkus.datasource.devservices.init-script-path=db/init.sql
#quarkus.datasource.reactive.max-size=20

# Production database settings (configure for production)
#%prod.quarkus.datasource.db-kind=mysql
#%prod.quarkus.datasource.reactive.url=mysql://localhost:3306/edios
#%prod.quarkus.datasource.username=edios_user
#%prod.quarkus.datasource.password=${DB_PASSWORD}

# =============================================================================
# Vert.x Configuration
# =============================================================================

# Event loop threads (default: 2 * CPU cores, omit to use Quarkus default)
# quarkus.vertx.event-loops-pool-size=${VERTX_EVENT_LOOPS:}

# Worker pool for blocking operations
quarkus.vertx.worker-pool-size=${VERTX_WORKER_POOL:20}

# Event bus configuration
quarkus.vertx.cluster.clustered=false
quarkus.vertx.warning-exception-time=PT2S

# =============================================================================
# Application-specific Configuration
# =============================================================================

# Rule refresh interval (how often to reload rules from source)
app.rules.refresh-interval=60s

# Maximum number of events in a single batch request
app.events.max-batch-size=${EVENTS_MAX_BATCH:1000}

# =============================================================================
# Logging Configuration
# =============================================================================

quarkus.log.level=INFO
quarkus.log.category."org.iki".level=DEBUG
quarkus.log.category."io.vertx".level=WARN
quarkus.log.category."io.quarkus".level=INFO

# JSON logging for production
quarkus.log.console.json=${LOG_JSON:false}
quarkus.log.console.json.pretty-print=false

# =============================================================================
# Health Checks
# =============================================================================

quarkus.health.extensions.enabled=true
quarkus.smallrye-health.root-path=/health

# =============================================================================
# OpenAPI / Swagger UI Configuration
# =============================================================================

mp.openapi.extensions.smallrye.info.title=Edios Transaction Event API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=High-throughput transaction event ingestion with CEL rule evaluation
mp.openapi.extensions.smallrye.info.contact.name=API Support
mp.openapi.extensions.smallrye.info.license.name=Apache 2.0
mp.openapi.extensions.smallrye.info.license.url=https://www.apache.org/licenses/LICENSE-2.0.html

# OpenAPI paths
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.path=/swagger-ui
quarkus.swagger-ui.always-include=true

# =============================================================================
# Development Profile Overrides
# =============================================================================

%dev.quarkus.http.insecure-requests=enabled
%dev.quarkus.http.ssl.certificate.files=
%dev.quarkus.http.ssl.certificate.key-files=
%dev.quarkus.log.console.json=false
%dev.quarkus.log.category."org.iki".level=DEBUG


# =============================================================================
# Test Profile Overrides
# =============================================================================

%test.quarkus.http.insecure-requests=enabled
%test.quarkus.http.ssl.certificate.files=
%test.quarkus.http.ssl.certificate.key-files=
%test.quarkus.log.level=WARN
